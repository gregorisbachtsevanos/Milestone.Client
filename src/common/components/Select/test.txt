 const finalProps = {
    ref: ref as React.Ref<SelectInstance<Option, boolean, GroupBase<Option>>>,
    options: selectAll ? optionsWithSelectAll : options,
    onChange: handleSelectChange,
    onInputChange: handleInputChange,
    onFocus: handleInputFocus,
    value: value,
    menuIsOpen,
    isDisabled,
    styles: selectStyles({ error, theme, isDisabled, size, width }),
    defaultValue,
    blurInputOnSelect: isMulti ? closeMenuOnSelect : blurInputOnSelect,
    isMulti: isMulti,
    menuPortalTarget: withPortaling ? document.body : null,
    closeMenuOnSelect,
    components: {
        Option: (
          optionProps: JSX.IntrinsicAttributes &
            OptionProps<Option, boolean, GroupBase<Option>> & {
              lastElementRef?: RefCallback<HTMLElement>;
            }
        ) => (
          <CustomOption {...optionProps} lastElementRef={fetchMore ? lastElementRef : undefined} />
        ),
      DropdownIndicator: (
        indicatorProps: JSX.IntrinsicAttributes &
          DropdownIndicatorProps<Option, boolean, GroupBase<Option>>
      ) => (
        <CustomDropdownIndicator
          {...indicatorProps}
          toggleMenu={() => !isDisabled && setMenuIsOpen((prevState) => !prevState)}
        />
      ),
      //   ...customComponents,
    },
    // ...restProps,
  };